<html metal:use-macro="${page}/page">
  <title metal:fill-slot="title">Collections</title>


  <div id="main" metal:fill-slot="content">


      <h2 class="center">Collections</h2>
      <div id="nearby">
        <span id="previous"></span>
        <span id="up">
          <img tal:attributes="src up" alt="Up arrow"
          class="nearby-arrows" />
          <a tal:attributes="href album_index">Gallery</a>
        </span>
        <span id="next"></span>
      </div>
      <div class="collection-summary"
      tal:repeat="collection collections">
        <h3 class="center">
          <a tal:attributes="href collection/output_url"
          tal:content="collection/name"></a>
        </h3>
        <a tal:attributes="href collection/output_url">
          <img tal:define="image php:get_random_image_by_collection(collection.name)"
          tal:attributes="src image/thumbnail/url; alt image/caption" />
        </a>
        <p>
          <tal:block repeat="occasion php:get_occasions_by_collection(collection.name)">

            <a tal:define="number php:count(get_images_by_occassion(occasion.name))"
            tal:attributes="href occasion/output_url"
            tal:content="php: occasion.name . ' (' . number . ')'" />
            <br />
          </tal:block>
        </p>
      </div>

      <div class="spacer">&#160;</div>
   </div>

</html>


 
 


